{
  "permissions": {
    "allow": [
      "Bash(node run:*)",
      "Bash(cfn-lint:*)",
      "Bash(deploy.py:*)",
      "Bash(identify:*)",
      "Bash(magick:*)",
      "Bash(convert:*)"
    ],
    "deny": [
      "Bash(*deploy*prod*)",
      "Bash(*npm run build*)"
    ]
  },
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "grep -q 'node run deploy' && grep -q 'exit_code\":0' && echo && echo \"ðŸš€ API Portal deployment started. Check CloudFormation stack progress.\" || exit 0"
          },
          {
            "type": "command",
            "command": "grep -q 'node run start' && grep -q 'exit_code\":0' && echo && echo \"ðŸŒ Development server running at http://localhost:3000\" || exit 0"
          },
          {
            "type": "command",
            "command": "grep -E 'cp.*custom-content' && grep -q 'exit_code\":0' && echo && echo \"ðŸ“„ Remember: Copy custom content to all THREE locations!\" || exit 0"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash(*npm run build*)",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'âš ï¸ Build system is fragile. Manually update files in THREE locations instead.' >&2 && exit 2"
          }
        ]
      }
    ]
  },
  "env": {
    "API_PORTAL": "true",
    "BUILD_FRAGILE": "true"
  }
}